# BrainFuchlamydomonos
一种基于Java，在Brainfuck的基础上进行了修改的功能更加强大的脚本语言，可以简称为**BFCh**。

# BFCh概述

BFCh是运行在[BFCh虚拟机](#BFCh虚拟机)上，由10个操作符（[\+](#\+)，[\-](#\-)，[<](#<)，[>](#>)，<a href="#lb">\[</a>，[\]](#\])，[,](#,)，[.](#.)，[/](#/)，[\\](#\\)）组成的语言。它基本兼容Brainfuck的语法，并且兼容Java，可以调用Java方法。

# BFCh虚拟机

BFCh虚拟机由**内存**，**剪贴板**，**输出序列**和**工作指针**组成。

* 内存为一个数组，数组中的每个值都为**非负整数**或**Java对象的引用**。
* 剪贴板为一个单元素数组，元素同样为**非负整数**或**Java对象的引用**。
* 输出序列是一个类似内存的数组。
* **工作指针**是一个指向内存中某个值的指针。

# BFCh运行流程

BFCh脚本执行时，BFCh虚拟机将从脚本的第一个字符开始，依次执行所有操作符，直到出现异常或者所有字符都执行完毕。

# BFCh操作符

## \+

类似Brainfuck中的`+`。具体功能为：

* 若工作指针指向的内容为非负整数，将其值加1
* 若工作指针指向的内容为`java.lang.reflect.Method`对象的引用，执行以下内容：
  * 将读到的对象记为`method`
  * 读取工作指针指向内容的下一位
  * 若此位为正整数，将该数记为`n`，并执行以下操作：
    * 读取`n`的下一位，记为`obj`
    * 从`obj`的下一位开始读取`n - 1`个值，加入长为`n - 1`的数组中，并将该数组记为`args`
    * 执行`method.invoke(obj, args)`，把工作指针指向的内容设为上述方法的返回值
  * 否则，不执行任何操作
* 否则，不执行任何操作

## \-

类似Brainfuck中的`-`。具体功能为：

* 若工作指针指向的内容为正整数，将其值减1
* 否则，将工作指针指向的内容设为0

## <

与Brainfuck中的`<`相同，把工作指针左移一位。

## >

与Brainfuck中的`>`相同，把工作指针右移一位。

## <span id="lb">\[</span>

与Brainfuck中的`[`相同：

* 若工作指针指向的内容为0，向后跳转到对应的`]`指令
* 否则，不进行任何操作，继续执行

## \]

与Brainfuck中的`]`相同：

* 若工作指针指向的内容不为0，向前跳转到对应的`[`指令
* 否则，不进行任何操作，继续执行

## ,

类似Brainfuck中的`,`。接受一个输入，并把工作指针指向的内容设为该值。

## .

类似Brainfuck中的`.`。把工作指针指向的内容输出到输出序列。

## /

把剪贴板的元素设为工作指针指向的值。工作指针指向的值保持不变。

## \\

把工作指针指向的值设为剪贴板的元素。剪贴板保持不变。

# 其他注意事项

在BFCh中，整数`0`与对象引用`null`视为相同的值。使用操作符`.`进行输出时，整数`0`会被输出为`null`。
